openapi: 3.0.3
info:
  title: KarirKit API
  version: 1.0.0
  description: |
    REST-ish API for KarirKit covering authentication, job applications, application letters, portfolios, and CV builder.
    Authentication uses an HTTP-only cookie named karirkit_session when required.
servers:
  - url: http://localhost:3000
    description: Local
tags:
  - name: Auth
  - name: Account
  - name: Dashboard
  - name: Applications
  - name: Application Letters
  - name: Portfolios
  - name: CVs
  - name: Public
  - name: Uploads
  - name: Blogs
  - name: Admin
paths:
  /auth/register:
    post:
      tags: [Auth]
      summary: Register
      description: Create a new user account. May also log the user in by setting the auth cookie.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
        '400':
          $ref: '#/components/responses/ValidationError'
  /auth/login:
    post:
      tags: [Auth]
      summary: Login with username or email
      description: |
        Log in using identifier (username or email) and password.
        If OTP is enabled, this will send an OTP code to the user's email and require verification via /auth/verify-otp.
        If OTP is disabled, this will authenticate the user directly and set the karirkit_session cookie.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        '200':
          description: Login successful or OTP sent
          content:
            application/json:
              schema:
                oneOf:
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          message:
                            type: string
                            example: "OTP telah dikirim ke email Anda. Silakan verifikasi untuk menyelesaikan login."
                          requires_otp:
                            type: boolean
                            example: true
                    description: Response when OTP is enabled and sent to user's email
                  - $ref: '#/components/schemas/AuthUserResponse'
                    description: Response when OTP is disabled and user is authenticated directly
        '401':
          $ref: '#/components/responses/Unauthorized'
        '400':
          $ref: '#/components/responses/ValidationError'
  /auth/google:
    post:
      tags: [Auth]
      summary: Login with Google
      description: Login or register via Google OAuth using an ID token or authorization code. Sets auth cookie on success.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GoogleLoginRequest'
      responses:
        '200':
          description: Authenticated with Google
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthUserResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '400':
          $ref: '#/components/responses/ValidationError'
  /auth/logout:
    post:
      tags: [Auth]
      summary: Logout
      description: Clear the authentication cookie.
      security:
        - sessionCookie: []
      responses:
        '204':
          description: Logged out
        '401':
          $ref: '#/components/responses/Unauthorized'
  /account/me:
    get:
      tags: [Account]
      summary: Get current user
      security:
        - sessionCookie: []
      responses:
        '200':
          description: Current user profile
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
    put:
      tags: [Account]
      summary: Update current user
      security:
        - sessionCookie: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateMeRequest'
          multipart/form-data:
            schema:
              type: object
              properties:
                name:
                  type: string
                username:
                  type: string
                email:
                  type: string
                  format: email
                phone:
                  type: string
                  nullable: true
                avatar:
                  type: string
                  format: binary
      responses:
        '200':
          description: Updated profile
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '400':
          $ref: '#/components/responses/ValidationError'
  /auth/forgot-password:
    post:
      tags: [Auth]
      summary: Forgot password
      description: Send a reset email with token.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ForgotPasswordRequest'
      responses:
        '200':
          description: Reset email dispatched
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MessageResponse'
        '400':
          $ref: '#/components/responses/ValidationError'
  /auth/reset-password:
    post:
      tags: [Auth]
      summary: Reset password with token
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ResetPasswordRequest'
      responses:
        '200':
          description: Password reset
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MessageResponse'
        '400':
          $ref: '#/components/responses/ValidationError'
  /account/change-password:
    put:
      tags: [Account]
      summary: Change current password
      security:
        - sessionCookie: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChangePasswordRequest'
      responses:
        '200':
          description: Password updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MessageResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '400':
          $ref: '#/components/responses/ValidationError'
  /auth/verify-otp:
    post:
      tags: [Auth]
      summary: Verify OTP for login
      description: |
        Verify the one-time password (OTP) sent to the user's email and complete the login process.
        This endpoint is used after /auth/login when OTP is enabled. Sets the karirkit_session cookie on success.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VerifyOtpRequest'
      responses:
        '200':
          description: OTP verified successfully, user authenticated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthUserResponse'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          description: Invalid or expired OTP
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /auth/resend-otp:
    post:
      tags: [Auth]
      summary: Resend OTP for login verification
      description: Resend a new one-time password (OTP) to the user's email for login verification.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ResendOtpRequest'
      responses:
        '200':
          description: OTP resent successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MessageResponse'
        '400':
          $ref: '#/components/responses/ValidationError'
        '404':
          description: User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /applications:
    get:
      tags: [Applications]
      summary: List applications
      description: List applications for the authenticated user with search, filters, sorting, and pagination.
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/PerPage'
        - $ref: '#/components/parameters/SearchQuery'
        - $ref: '#/components/parameters/SortOrder'
        - name: sort_by
          in: query
          schema:
            type: string
            enum: [date, created_at, updated_at, company_name, position, status, result_status]
        - name: status
          in: query
          schema:
            type: string
        - name: result_status
          in: query
          schema:
            type: string
            enum: [pending, passed, failed]
        - name: job_type
          in: query
          schema:
            $ref: '#/components/schemas/JobType'
        - name: work_system
          in: query
          schema:
            $ref: '#/components/schemas/WorkSystem'
        - name: date_from
          in: query
          schema:
            type: string
            format: date
        - name: date_to
          in: query
          schema:
            type: string
            format: date
        - name: location
          in: query
          schema:
            type: string
      responses:
        '200':
          description: Applications list
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApplicationListResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
    post:
      tags: [Applications]
      summary: Create application
      security:
        - sessionCookie: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ApplicationPayload'
      responses:
        '201':
          description: Created application
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApplicationResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '400':
          $ref: '#/components/responses/ValidationError'
  /applications/stats:
    get:
      tags: [Applications]
      summary: Get application statistics
      description: Retrieve comprehensive statistics about job applications for authenticated user
      security:
        - sessionCookie: []
      responses:
        '200':
          description: Application statistics
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApplicationStatsResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
  /applications/{id}:
    get:
      tags: [Applications]
      summary: Get application detail
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/ResourceId'
      responses:
        '200':
          description: Application detail
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApplicationResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags: [Applications]
      summary: Update application
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/ResourceId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ApplicationPayload'
      responses:
        '200':
          description: Updated application
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApplicationResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags: [Applications]
      summary: Delete application
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/ResourceId'
      responses:
        '204':
          description: Deleted
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /applications/{id}/duplicate:
    post:
      tags: [Applications]
      summary: Duplicate application
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/ResourceId'
      responses:
        '201':
          description: Duplicated application
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApplicationResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /application-letters:
    get:
      tags: [Application Letters]
      summary: List application letters
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/PerPage'
        - $ref: '#/components/parameters/SearchQuery'
        - $ref: '#/components/parameters/SortOrder'
        - name: sort_by
          in: query
          schema:
            type: string
            enum: [created_at, updated_at, application_date, company_name, subject]
        - name: company_name
          in: query
          schema:
            type: string
        - name: application_date
          in: query
          schema:
            type: string
      responses:
        '200':
          description: Letters list
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApplicationLetterListResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
    post:
      tags: [Application Letters]
      summary: Create application letter
      security:
        - sessionCookie: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ApplicationLetterPayload'
      responses:
        '201':
          description: Created letter
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApplicationLetterResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '400':
          $ref: '#/components/responses/ValidationError'
  /application-letters/{id}:
    get:
      tags: [Application Letters]
      summary: Get application letter detail
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/ResourceId'
      responses:
        '200':
          description: Application letter detail
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApplicationLetterResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags: [Application Letters]
      summary: Update application letter
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/ResourceId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ApplicationLetterPayload'
      responses:
        '200':
          description: Updated letter
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApplicationLetterResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags: [Application Letters]
      summary: Delete application letter
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/ResourceId'
      responses:
        '204':
          description: Deleted
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /application-letters/{id}/duplicate:
    post:
      tags: [Application Letters]
      summary: Duplicate application letter
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/ResourceId'
      responses:
        '201':
          description: Duplicated application letter
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApplicationLetterResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /application-letters/{id}/download:
    get:
      tags: [Application Letters]
      summary: Download application letter
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/ResourceId'
        - name: format
          in: query
          schema:
            type: string
            enum: [pdf, docx]
            default: pdf
      responses:
        '200':
          description: Downloaded letter
          content:
            application/pdf:
              schema:
                type: string
                format: binary
            application/vnd.openxmlformats-officedocument.wordprocessingml.document:
              schema:
                type: string
                format: binary
            application/json:
              schema:
                $ref: '#/components/schemas/DownloadUrlResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /uploads:
    post:
      tags: [Uploads]
      summary: Upload temporary file
      description: Upload any binary file to the temp folder so that it can be attached to other resources later.
      security:
        - sessionCookie: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                  description: File to persist inside the temp folder
              required: [file]
      responses:
        '201':
          description: File uploaded to the temp storage
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TempUploadResponse'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/Unauthorized'
  /portfolios:
    get:
      tags: [Portfolios]
      summary: List portfolios
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/PerPage'
        - $ref: '#/components/parameters/SearchQuery'
        - $ref: '#/components/parameters/SortOrder'
        - name: sort_by
          in: query
          schema:
            type: string
            enum: [created_at, updated_at, year, month, title]
        - name: project_type
          in: query
          schema:
            $ref: '#/components/schemas/ProjectType'
        - name: industry
          in: query
          schema:
            type: string
        - name: year
          in: query
          schema:
            type: integer
        - name: month
          in: query
          schema:
            type: integer
      responses:
        '200':
          description: Portfolios list
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PortfolioListResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
    post:
      tags: [Portfolios]
      summary: Create portfolio
      description: >
        Submit the complete portfolio data (details, cover, media, tools) in a single JSON request.
        Any files must be uploaded beforehand via `/uploads` and referenced here by their returned path.
      security:
        - sessionCookie: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PortfolioPayload'
      responses:
        '201':
          description: Created portfolio
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PortfolioResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '400':
          $ref: '#/components/responses/ValidationError'
  /portfolios/{id}:
    get:
      tags: [Portfolios]
      summary: Get portfolio detail
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/ResourceId'
      responses:
        '200':
          description: Portfolio detail
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PortfolioResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags: [Portfolios]
      summary: Update portfolio
      description: >
        Replace the entire portfolio definition in one request. To attach images or other files,
        first upload them to `/uploads` and send the resulting path inside the JSON payload.
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/ResourceId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PortfolioPayload'
      responses:
        '200':
          description: Updated portfolio
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PortfolioResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags: [Portfolios]
      summary: Delete portfolio
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/ResourceId'
      responses:
        '204':
          description: Deleted
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /u/@{username}:
    get:
      tags: [Public]
      summary: Public portfolio page by username
      parameters:
        - name: username
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Public portfolio listing
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PublicPortfolioResponse'
        '404':
          $ref: '#/components/responses/NotFound'
  /u/@{username}/{id}:
    get:
      tags: [Public]
      summary: Public portfolio detail by username and id
      parameters:
        - name: username
          in: path
          required: true
          schema:
            type: string
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Public portfolio detail
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PublicPortfolioDetailResponse'
        '404':
          $ref: '#/components/responses/NotFound'
  /cvs:
    get:
      tags: [CVs]
      summary: List CVs
      description: List every CV owned by the authenticated user with optional filters and pagination.
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/PerPage'
        - $ref: '#/components/parameters/SearchQuery'
        - $ref: '#/components/parameters/SortOrder'
        - name: sort_by
          in: query
          schema:
            type: string
            enum: [created_at, updated_at, name]
        - name: name
          in: query
          schema:
            type: string
        - name: email
          in: query
          schema:
            type: string
      responses:
        '200':
          description: CVs list
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CvListResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
    post:
      tags: [CVs]
      summary: Create CV
      description: >
        Submit the entire CV definition (profile, sections, and optional `photo` path) in a single JSON payload.
        The referenced `photo` and section attachments must already be uploaded via `/uploads`.
      security:
        - sessionCookie: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CvPayload'
      responses:
        '201':
          description: Created CV
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CvResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '400':
          $ref: '#/components/responses/ValidationError'
  /cvs/{id}:
    get:
      tags: [CVs]
      summary: Get CV detail
      description: Retrieve the complete CV payload for editing or viewing.
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/ResourceId'
      responses:
        '200':
          description: CV detail
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CvResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags: [CVs]
      summary: Update CV
      description: >
        Replace the CV with a new `CvPayload`, syncing every section (educations, experiences, etc.) and the `photo` path
        exactly as provided in the request body.
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/ResourceId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CvPayload'
      responses:
        '200':
          description: Updated CV
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CvResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags: [CVs]
      summary: Delete CV
      description: Permanently remove the CV and all associated sections.
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/ResourceId'
      responses:
        '204':
          description: Deleted
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /cvs/{id}/duplicate:
    post:
      tags: [CVs]
      summary: Duplicate CV
      description: Create a new CV by cloning every field, section, and photo reference from the source CV.
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/ResourceId'
      responses:
        '201':
          description: Duplicated CV
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CvResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /cvs/{id}/download:
    get:
      tags: [CVs]
      summary: Download CV (PDF/DOCX)
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/ResourceId'
        - name: format
          in: query
          schema:
            type: string
            enum: [pdf, docx]
            default: pdf
      responses:
        '200':
          description: Downloaded CV
          content:
            application/pdf:
              schema:
                type: string
                format: binary
            application/vnd.openxmlformats-officedocument.wordprocessingml.document:
              schema:
                type: string
                format: binary
            application/json:
              schema:
                $ref: '#/components/schemas/DownloadUrlResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /dashboard:
    get:
      tags: [Dashboard]
      summary: Get user dashboard statistics
      description: Retrieve comprehensive statistics about user's job applications, CVs, portfolios, and application letters for the dashboard.
      security:
        - sessionCookie: []
      responses:
        '200':
          description: User dashboard statistics
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DashboardResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
  /stats:
    get:
      tags: [Public]
      summary: Get platform statistics
      description: Retrieve platform statistics for display on the home page.
      responses:
        '200':
          description: Platform statistics
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatsResponse'
  /blogs:
    get:
      tags: [Blogs]
      summary: List blogs
      description: List blogs with search, filters, sorting, and pagination.
      parameters:
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/PerPage'
        - $ref: '#/components/parameters/SearchQuery'
        - $ref: '#/components/parameters/SortOrder'
        - name: sort_by
          in: query
          schema:
            type: string
            enum: [created_at, updated_at, published_at, title, views]
            default: published_at
        - name: status
          in: query
          schema:
            type: string
            enum: [published]
            default: published
        - name: category_id
          in: query
          schema:
            type: string
        - name: tag_id
          in: query
          schema:
            type: string
        - name: author_id
          in: query
          schema:
            type: string
        - name: published_from
          in: query
          schema:
            type: string
            format: date
        - name: published_to
          in: query
          schema:
            type: string
            format: date
      responses:
        '200':
          description: Blogs list
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BlogListResponse'
  /blogs/{slug}:
    get:
      tags: [Blogs]
      summary: Get blog detail by slug
      description: Get published blog detail by slug for frontend display
      parameters:
        - name: slug
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Blog detail
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BlogResponse'
        '404':
          $ref: '#/components/responses/NotFound'
  /blogs/categories:
    get:
      tags: [Blogs]
      summary: List blog categories
      description: Get all blog categories for frontend display
      responses:
        '200':
          description: Blog categories list
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      items:
                        type: array
                        items:
                          $ref: '#/components/schemas/BlogCategory'
  /blogs/tags:
    get:
      tags: [Blogs]
      summary: List blog tags
      description: Get all blog tags for frontend display
      responses:
        '200':
          description: Blog tags list
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      items:
                        type: array
                        items:
                          $ref: '#/components/schemas/BlogTag'
  /admin/dashboard:
    get:
      tags: [Admin]
      summary: Get dashboard statistics
      description: Retrieve comprehensive statistics for the admin dashboard
      security:
        - sessionCookie: []
      responses:
        '200':
          description: Dashboard statistics
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminDashboardResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
  /admin/users:
    get:
      tags: [Admin]
      summary: List users
      description: List all users with search, filters, sorting, and pagination
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/PerPage'
        - $ref: '#/components/parameters/SearchQuery'
        - $ref: '#/components/parameters/SortOrder'
        - name: sort_by
          in: query
          schema:
            type: string
            enum: [created_at, updated_at, name, username, email, role]
            default: created_at
        - name: role
          in: query
          schema:
            type: string
            enum: [user, admin]
        - name: created_from
          in: query
          schema:
            type: string
            format: date
        - name: created_to
          in: query
          schema:
            type: string
            format: date
      responses:
        '200':
          description: Users list
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminUserListResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
    post:
      tags: [Admin]
      summary: Create user
      description: Create a new user account
      security:
        - sessionCookie: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminCreateUserRequest'
      responses:
        '201':
          description: Created user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '400':
          $ref: '#/components/responses/ValidationError'
  /admin/users/{id}:
    get:
      tags: [Admin]
      summary: Get user detail
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/ResourceId'
      responses:
        '200':
          description: User detail
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags: [Admin]
      summary: Update user
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/ResourceId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminUpdateUserRequest'
      responses:
        '200':
          description: Updated user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '400':
          $ref: '#/components/responses/ValidationError'
    delete:
      tags: [Admin]
      summary: Delete user
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/ResourceId'
      responses:
        '204':
          description: Deleted
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
  /templates:
    get:
      tags: [Public]
      summary: List templates
      description: List all templates with optional filters by type and language
      parameters:
        - name: type
          in: query
          schema:
            type: string
            enum: [cv, application_letter]
          description: Filter by template type
        - name: language
          in: query
          schema:
            type: string
            enum: [en, id]
          description: Filter by template language
      responses:
        '200':
          description: Templates list
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      items:
                        type: array
                        items:
                          $ref: '#/components/schemas/TemplateWithoutPath'
  /admin/templates:
    get:
      tags: [Admin]
      summary: List templates
      description: List all templates with search, filters, sorting, and pagination
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/PerPage'
        - $ref: '#/components/parameters/SearchQuery'
        - $ref: '#/components/parameters/SortOrder'
        - name: sort_by
          in: query
          schema:
            type: string
            enum: [created_at, updated_at, name, type, language, is_premium]
            default: created_at
        - name: type
          in: query
          schema:
            type: string
            enum: [cv, application_letter]
        - name: language
          in: query
          schema:
            type: string
            enum: [en, id]
        - name: is_premium
          in: query
          schema:
            type: boolean
      responses:
        '200':
          description: Templates list
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminTemplateListResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
    post:
      tags: [Admin]
      summary: Create template
      description: Create a new template
      security:
        - sessionCookie: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminCreateTemplateRequest'
      responses:
        '201':
          description: Created template
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TemplateResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '400':
          $ref: '#/components/responses/ValidationError'
  /admin/templates/{id}:
    get:
      tags: [Admin]
      summary: Get template detail
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/ResourceId'
      responses:
        '200':
          description: Template detail
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TemplateResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags: [Admin]
      summary: Update template
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/ResourceId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminUpdateTemplateRequest'
      responses:
        '200':
          description: Updated template
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TemplateResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '400':
          $ref: '#/components/responses/ValidationError'
    delete:
      tags: [Admin]
      summary: Delete template
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/ResourceId'
      responses:
        '204':
          description: Deleted
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
  /admin/blogs:
    get:
      tags: [Admin]
      summary: List blogs
      description: List all blogs with search, filters, sorting, and pagination
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/PerPage'
        - $ref: '#/components/parameters/SearchQuery'
        - $ref: '#/components/parameters/SortOrder'
        - name: sort_by
          in: query
          schema:
            type: string
            enum: [created_at, updated_at, published_at, title, views, status]
            default: created_at
        - name: status
          in: query
          schema:
            type: string
            enum: [draft, published, archived]
        - name: category_id
          in: query
          schema:
            type: string
        - name: author_id
          in: query
          schema:
            type: string
        - name: published_from
          in: query
          schema:
            type: string
            format: date
        - name: published_to
          in: query
          schema:
            type: string
            format: date
      responses:
        '200':
          description: Blogs list
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminBlogListResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
    post:
      tags: [Admin]
      summary: Create blog
      description: Create a new blog post
      security:
        - sessionCookie: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminCreateBlogRequest'
      responses:
        '201':
          description: Created blog
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BlogResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '400':
          $ref: '#/components/responses/ValidationError'
  /admin/blogs/{id}:
    get:
      tags: [Admin]
      summary: Get blog detail
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/ResourceId'
      responses:
        '200':
          description: Blog detail
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BlogResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags: [Admin]
      summary: Update blog
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/ResourceId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminUpdateBlogRequest'
      responses:
        '200':
          description: Updated blog
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BlogResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '400':
          $ref: '#/components/responses/ValidationError'
    delete:
      tags: [Admin]
      summary: Delete blog
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/ResourceId'
      responses:
        '204':
          description: Deleted
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
  /admin/blog-categories:
    get:
      tags: [Admin]
      summary: List blog categories
      description: List all blog categories with search, filters, sorting, and pagination
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/PerPage'
        - $ref: '#/components/parameters/SearchQuery'
        - $ref: '#/components/parameters/SortOrder'
        - name: sort_by
          in: query
          schema:
            type: string
            enum: [created_at, updated_at, name]
            default: name
      responses:
        '200':
          description: Blog categories list
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminBlogCategoryListResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
    post:
      tags: [Admin]
      summary: Create blog category
      description: Create a new blog category
      security:
        - sessionCookie: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminCreateBlogCategoryRequest'
      responses:
        '201':
          description: Created blog category
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BlogCategoryResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '400':
          $ref: '#/components/responses/ValidationError'
  /admin/blog-categories/{id}:
    get:
      tags: [Admin]
      summary: Get blog category detail
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/ResourceId'
      responses:
        '200':
          description: Blog category detail
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BlogCategoryResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      tags: [Admin]
      summary: Update blog category
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/ResourceId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminUpdateBlogCategoryRequest'
      responses:
        '200':
          description: Updated blog category
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BlogCategoryResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '400':
          $ref: '#/components/responses/ValidationError'
    delete:
      tags: [Admin]
      summary: Delete blog category
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/ResourceId'
      responses:
        '204':
          description: Deleted
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
  /admin/blog-tags:
    get:
      tags: [Admin]
      summary: List blog tags
      description: List all blog tags with search, filters, sorting, and pagination
      security:
        - sessionCookie: []
      parameters:
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/PerPage'
        - $ref: '#/components/parameters/SearchQuery'
        - $ref: '#/components/parameters/SortOrder'
        - name: sort_by
          in: query
          schema:
            type: string
            enum: [created_at, updated_at, name]
            default: name
      responses:
        '200':
          description: Blog tags list
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminBlogTagListResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
    post:
      tags: [Admin]
      summary: Create blog tag
      description: Create a new blog tag
      security:
        - sessionCookie: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminCreateBlogTagRequest'
      responses:
        '201':
          description: Created blog tag
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BlogTagResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '400':
          $ref: '#/components/responses/ValidationError'
  /admin/blog-tags/{id}:
              get:
                tags: [Admin]
                summary: Get blog tag detail
                security:
                  - sessionCookie: []
                parameters:
                  - $ref: '#/components/parameters/ResourceId'
                responses:
                  '200':
                    description: Blog tag detail
                    content:
                      application/json:
                        schema:
                          $ref: '#/components/schemas/BlogTagResponse'
                  '401':
                    $ref: '#/components/responses/Unauthorized'
                  '403':
                    $ref: '#/components/responses/Forbidden'
                  '404':
                    $ref: '#/components/responses/NotFound'
              put:
                tags: [Admin]
                summary: Update blog tag
                security:
                  - sessionCookie: []
                parameters:
                  - $ref: '#/components/parameters/ResourceId'
                requestBody:
                  required: true
                  content:
                    application/json:
                      schema:
                        $ref: '#/components/schemas/AdminUpdateBlogTagRequest'
                responses:
                  '200':
                    description: Updated blog tag
                    content:
                      application/json:
                        schema:
                          $ref: '#/components/schemas/BlogTagResponse'
                  '401':
                    $ref: '#/components/responses/Unauthorized'
                  '403':
                    $ref: '#/components/responses/Forbidden'
                  '404':
                    $ref: '#/components/responses/NotFound'
                  '400':
                    $ref: '#/components/responses/ValidationError'
              delete:
                tags: [Admin]
                summary: Delete blog tag
                security:
                  - sessionCookie: []
                parameters:
                  - $ref: '#/components/parameters/ResourceId'
                responses:
                  '204':
                    description: Deleted
                  '401':
                    $ref: '#/components/responses/Unauthorized'
                  '403':
                    $ref: '#/components/responses/Forbidden'
                  '404':
                    $ref: '#/components/responses/NotFound'
  /admin/blogs/uploads:
   post:
     tags: [Admin]
     summary: Upload blog file
     description: Upload files for blog posts (featured images, attachments, etc.) to the temp folder for later association with blog posts.
     security:
       - sessionCookie: []
     requestBody:
       required: true
       content:
         multipart/form-data:
           schema:
             type: object
             properties:
               file:
                 type: string
                 format: binary
                 description: File to upload for blog post (image, document, etc.)
             required: [file]
     responses:
       '201':
         description: File uploaded successfully
         content:
           application/json:
             schema:
               $ref: '#/components/schemas/TempUploadResponse'
       '400':
         $ref: '#/components/responses/ValidationError'
       '401':
         $ref: '#/components/responses/Unauthorized'
       '403':
         $ref: '#/components/responses/Forbidden'
components:
  securitySchemes:
    sessionCookie:
      type: apiKey
      in: cookie
      name: karirkit_session
  parameters:
    Page:
      name: page
      in: query
      schema:
        type: integer
        minimum: 1
        default: 1
    PerPage:
      name: per_page
      in: query
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 20
    SearchQuery:
      name: q
      in: query
      schema:
        type: string
    SortOrder:
      name: sort_order
      in: query
      schema:
        type: string
        enum: [asc, desc]
        default: desc
    ResourceId:
      name: id
      in: path
      required: true
      schema:
        type: string
  responses:
    Unauthorized:
      description: Unauthorized
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    ValidationError:
      description: Validation error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    NotFound:
      description: Not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    Forbidden:
      description: Forbidden - Admin access required
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
  schemas:
    ErrorResponse:
      type: object
      properties:
        errors:
          type: object
          additionalProperties:
            type: array
            items:
              type: string
    MessageResponse:
      type: object
      properties:
        data:
          type: object
          properties:
            message:
              type: string
    DownloadUrlResponse:
      type: object
      properties:
        data:
          type: object
          properties:
            download_url:
              type: string
    PreviewUrlResponse:
      type: object
      properties:
        data:
          type: object
          properties:
            preview_url:
              type: string
    Pagination:
      type: object
      properties:
        page:
          type: integer
        per_page:
          type: integer
        total_items:
          type: integer
        total_pages:
          type: integer
    User:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        username:
          type: string
        email:
          type: string
          format: email
        phone:
          type: string
          nullable: true
        role:
          type: string
          enum: [user, admin]
        avatar:
          type: string
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    RegisterRequest:
      type: object
      properties:
        name:
          type: string
        username:
          type: string
        email:
          type: string
        password:
          type: string
        phone:
          type: string
          nullable: true
      required: [name, username, email, password]
    LoginRequest:
      type: object
      properties:
        identifier:
          type: string
        password:
          type: string
      required: [identifier, password]
    GoogleLoginRequest:
      type: object
      properties:
        id_token:
          type: string
      required: [id_token]
    UpdateMeRequest:
      type: object
      properties:
        name:
          type: string
        username:
          type: string
        email:
          type: string
          format: email
        phone:
          type: string
          nullable: true
        avatar:
          type: string
          nullable: true
    ForgotPasswordRequest:
      type: object
      properties:
        email:
          type: string
          format: email
      required: [email]
    ResetPasswordRequest:
      type: object
      properties:
        token:
          type: string
        password:
          type: string
      required: [token, password]
    ChangePasswordRequest:
      type: object
      properties:
        current_password:
          type: string
        new_password:
          type: string
      required: [current_password, new_password]
    VerifyOtpRequest:
      type: object
      properties:
        identifier:
          type: string
          description: Username or email of user
        otp_code:
          type: string
          description: The OTP code sent to user's email
        password:
          type: string
          description: User's password for authentication
      required: [identifier, otp_code, password]
    ResendOtpRequest:
      type: object
      properties:
        identifier:
          type: string
          description: Username or email of user
      required: [identifier]
    JobType:
      type: string
      enum: [full_time, contract, internship, freelance, part_time]
    WorkSystem:
      type: string
      enum: [onsite, hybrid, remote]
    Application:
      type: object
      properties:
        id:
          type: string
        user_id:
          type: string
        company_name:
          type: string
        company_url:
          type: string
          nullable: true
        position:
          type: string
        job_source:
          type: string
          nullable: true
        job_type:
          $ref: '#/components/schemas/JobType'
        work_system:
          $ref: '#/components/schemas/WorkSystem'
        salary_min:
          type: number
        salary_max:
          type: number
        location:
          type: string
          nullable: true
        date:
          type: string
          format: date
        status:
          type: string
        result_status:
          type: string
          enum: [pending, passed, failed]
        contact_name:
          type: string
          nullable: true
        contact_email:
          type: string
          nullable: true
        contact_phone:
          type: string
          nullable: true
        follow_up_date:
          type: string
          format: date
          nullable: true
        follow_up_note:
          type: string
          nullable: true
        job_url:
          type: string
          nullable: true
        notes:
          type: string
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    ApplicationPayload:
      type: object
      properties:
        company_name:
          type: string
        company_url:
          type: string
          nullable: true
        position:
          type: string
        job_source:
          type: string
          nullable: true
        job_type:
          $ref: '#/components/schemas/JobType'
        work_system:
          $ref: '#/components/schemas/WorkSystem'
        salary_min:
          type: number
        salary_max:
          type: number
        location:
          type: string
          nullable: true
        date:
          type: string
          format: date
        status:
          type: string
        result_status:
          type: string
          enum: [pending, passed, failed]
        contact_name:
          type: string
          nullable: true
        contact_email:
          type: string
          nullable: true
        contact_phone:
          type: string
          nullable: true
        follow_up_date:
          type: string
          format: date
          nullable: true
        follow_up_note:
          type: string
          nullable: true
        job_url:
          type: string
          nullable: true
        notes:
          type: string
          nullable: true
      required:
        [company_name, position, job_type, work_system, date, status, result_status]
    ApplicationResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/Application'
    TempUploadResponse:
      type: object
      properties:
        data:
          type: object
          properties:
            path:
              type: string
              description: Relative path pointing to the stored temp file
            original_name:
              type: string
              description: Original filename supplied by the client
            size:
              type: integer
              format: int64
              description: File size in bytes
            mime_type:
              type: string
              description: Detected MIME type
    ApplicationListResponse:
      type: object
      properties:
        data:
          type: object
          properties:
            items:
              type: array
              items:
                $ref: '#/components/schemas/Application'
            pagination:
              $ref: '#/components/schemas/Pagination'
    ApplicationLetter:
      type: object
      properties:
        id:
          type: string
        user_id:
          type: string
        name:
          type: string
        birth_place_date:
          type: string
        gender:
          type: string
          enum: [male, female]
        marital_status:
          type: string
          enum: [single, married, widowed]
        education:
          type: string
        phone:
          type: string
        email:
          type: string
        address:
          type: string
        subject:
          type: string
        applicant_city:
          type: string
        application_date:
          type: string
        receiver_title:
          type: string
        company_name:
          type: string
        company_city:
          type: string
          nullable: true
        company_address:
          type: string
          nullable: true
        opening_paragraph:
          type: string
        body_paragraph:
          type: string
        attachments:
          type: string
        closing_paragraph:
          type: string
        signature:
          type: string
          nullable: true
        template_id:
          type: string
          format: uuid
          description: ID of the template used for this application letter
        template:
          type: object
          properties:
            id:
              type: string
            name:
              type: string
            path:
              type: string
            type:
              type: string
              enum: [cv, application_letter]
          description: Template details
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    ApplicationLetterPayload:
      type: object
      properties:
        name: { type: string }
        birth_place_date: { type: string }
        gender: { type: string, enum: [male, female] }
        marital_status: { type: string, enum: [single, married, widowed] }
        education: { type: string }
        phone: { type: string }
        email: { type: string }
        address: { type: string }
        subject: { type: string }
        applicant_city: { type: string }
        application_date: { type: string }
        receiver_title: { type: string }
        company_name: { type: string }
        company_city: { type: string, nullable: true }
        company_address: { type: string, nullable: true }
        opening_paragraph: { type: string }
        body_paragraph: { type: string }
        attachments: { type: string }
        closing_paragraph: { type: string }
        signature:
          type: string
          nullable: true
        template_id:
          type: string
          format: uuid
          description: ID of the template to use for this application letter
      required:
        [name, birth_place_date, gender, marital_status, education, phone, email, address, subject, applicant_city, application_date, receiver_title, company_name, opening_paragraph, body_paragraph, attachments, closing_paragraph, template_id]
    ApplicationLetterResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/ApplicationLetter'
    ApplicationLetterListResponse:
      type: object
      properties:
        data:
          type: object
          properties:
            items:
              type: array
              items:
                $ref: '#/components/schemas/ApplicationLetter'
            pagination:
              $ref: '#/components/schemas/Pagination'
    PortfolioMedia:
      type: object
      properties:
        id:
          type: string
        portfolio_id:
          type: string
        path:
          type: string
        caption:
          type: string
          nullable: true
    PortfolioTool:
      type: object
      properties:
        id:
          type: string
        portfolio_id:
          type: string
        name:
          type: string
    ProjectType:
      type: string
      enum: [work, freelance, personal, academic]
    Portfolio:
      type: object
      properties:
        id:
          type: string
        user_id:
          type: string
        title:
          type: string
        slug:
          type: string
        sort_description:
          type: string
        description:
          type: string
        role_title:
          type: string
        project_type:
          $ref: '#/components/schemas/ProjectType'
        industry:
          type: string
        month:
          type: integer
        year:
          type: integer
        live_url:
          type: string
          nullable: true
        repo_url:
          type: string
          nullable: true
        cover:
          type: string
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        medias:
          type: array
          items:
            $ref: '#/components/schemas/PortfolioMedia'
        tools:
          type: array
          items:
            $ref: '#/components/schemas/PortfolioTool'
    PortfolioPayload:
      type: object
      properties:
        title: { type: string }
        slug: { type: string }
        sort_description: { type: string }
        description: { type: string }
        role_title: { type: string }
        project_type: { $ref: '#/components/schemas/ProjectType' }
        industry: { type: string }
        month: { type: integer }
        year: { type: integer }
        live_url: { type: string, nullable: true }
        repo_url: { type: string, nullable: true }
        cover:
          type: string
          nullable: true
          description: Path returned from `/uploads` representing the portfolio cover image. Leave null to remove the cover.
        tools:
          type: array
          items:
            type: string
          description: Full list of tools/technologies for the portfolio item.
        medias:
          type: array
          items:
            type: object
            properties:
              path:
                type: string
                description: Path returned from `/uploads` for each media file.
              caption:
                type: string
                nullable: true
            required: [path]
          description: Ordered gallery assets referencing files previously uploaded via `/uploads`.
      required:
        [title, slug, sort_description, description, role_title, project_type, industry, month, year]
    PortfolioResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/Portfolio'
    PortfolioListResponse:
      type: object
      properties:
        data:
          type: object
          properties:
            items:
              type: array
              items:
                $ref: '#/components/schemas/Portfolio'
            pagination:
              $ref: '#/components/schemas/Pagination'
    PublicPortfolioResponse:
      type: object
      properties:
        data:
          type: object
          properties:
            user:
              type: object
              properties:
                id: { type: string }
                name: { type: string }
                username: { type: string }
                avatar: { type: string, nullable: true }
                headline: { type: string, nullable: true }
            portfolios:
              type: array
              items:
                $ref: '#/components/schemas/Portfolio'
    PublicPortfolioDetailResponse:
      type: object
      properties:
        data:
          type: object
          properties:
            user:
              type: object
              properties:
                id: { type: string }
                name: { type: string }
                username: { type: string }
                avatar: { type: string, nullable: true }
                headline: { type: string, nullable: true }
            portfolio:
              $ref: '#/components/schemas/Portfolio'
    CvEducation:
      type: object
      properties:
          degree:
            type: string
            enum: [highschool, associate, bachelor, master, doctorate, other]
          school_name:
            type: string
          school_location:
            type: string
          major:
            type: string
          start_month:
            type: integer
          start_year:
            type: integer
          end_month:
            type: integer
            nullable: true
          end_year:
            type: integer
            nullable: true
          is_current:
            type: boolean
          gpa:
            type: number
            nullable: true
          description:
            type: string
            nullable: true
    CvCertificate:
      type: object
      properties:
        title: { type: string }
        issuer: { type: string }
        issue_month: { type: integer }
        issue_year: { type: integer }
        expiry_month: { type: integer, nullable: true }
        expiry_year: { type: integer, nullable: true }
        no_expiry: { type: boolean, nullable: true }
        credential_id: { type: string, nullable: true }
        credential_url: { type: string, nullable: true }
        description: { type: string, nullable: true }
    CvExperience:
      type: object
      properties:
        job_title: { type: string }
        company_name: { type: string }
        company_location: { type: string }
        job_type: { $ref: '#/components/schemas/JobType' }
        start_month: { type: integer }
        start_year: { type: integer }
        end_month: { type: integer, nullable: true }
        end_year: { type: integer, nullable: true }
        is_current: { type: boolean }
        description: { type: string, nullable: true }
    CvSkill:
      type: object
      properties:
        name: { type: string }
        level:
          type: string
          enum: [beginner, intermediate, advanced, expert]
    CvAward:
      type: object
      properties:
        title: { type: string }
        issuer: { type: string }
        description: { type: string, nullable: true }
        year: { type: integer }
    CvSocialLink:
      type: object
      properties:
        platform: { type: string }
        url: { type: string }
    CvOrganization:
      type: object
      properties:
        organization_name: { type: string }
        role_title: { type: string }
        organization_type:
          type: string
          enum: [student, community, professional, volunteer, other]
        location: { type: string }
        start_month: { type: integer }
        start_year: { type: integer }
        end_month: { type: integer, nullable: true }
        end_year: { type: integer, nullable: true }
        is_current: { type: boolean }
        description: { type: string, nullable: true }
    Cv:
      type: object
      properties:
        id: { type: string }
        user_id: { type: string }
        name: { type: string }
        headline: { type: string }
        email: { type: string }
        phone: { type: string }
        address: { type: string }
        about: { type: string }
        photo: { type: string, nullable: true }
        template_id:
          type: string
          format: uuid
          description: ID of the template used for this CV
        template:
          type: object
          properties:
            id:
              type: string
            name:
              type: string
            path:
              type: string
            type:
              type: string
              enum: [cv, application_letter]
          description: Template details
        created_at: { type: string, format: date-time }
        updated_at: { type: string, format: date-time }
        educations:
          type: array
          items: { $ref: '#/components/schemas/CvEducation' }
        certificates:
          type: array
          items: { $ref: '#/components/schemas/CvCertificate' }
        experiences:
          type: array
          items: { $ref: '#/components/schemas/CvExperience' }
        skills:
          type: array
          items: { $ref: '#/components/schemas/CvSkill' }
        awards:
          type: array
          items: { $ref: '#/components/schemas/CvAward' }
        social_links:
          type: array
          items: { $ref: '#/components/schemas/CvSocialLink' }
        organizations:
          type: array
          items: { $ref: '#/components/schemas/CvOrganization' }
    CvPayload:
      type: object
      properties:
        name: { type: string }
        headline: { type: string }
        email: { type: string }
        phone: { type: string }
        address: { type: string }
        about: { type: string }
        photo: { type: string, nullable: true }
        template_id:
          type: string
          format: uuid
          description: ID of the template to use for this CV
        educations:
          type: array
          items: { $ref: '#/components/schemas/CvEducation' }
        certificates:
          type: array
          items: { $ref: '#/components/schemas/CvCertificate' }
        experiences:
          type: array
          items: { $ref: '#/components/schemas/CvExperience' }
        skills:
          type: array
          items: { $ref: '#/components/schemas/CvSkill' }
        awards:
          type: array
          items: { $ref: '#/components/schemas/CvAward' }
        social_links:
          type: array
          items: { $ref: '#/components/schemas/CvSocialLink' }
        organizations:
          type: array
          items: { $ref: '#/components/schemas/CvOrganization' }
      required: [name, headline, email, phone, address, about, template_id]
    CvResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/Cv'
    CvListResponse:
      type: object
      properties:
        data:
          type: object
          properties:
            items:
              type: array
              items:
                $ref: '#/components/schemas/Cv'
            pagination:
              $ref: '#/components/schemas/Pagination'
    UserResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/User'
    AuthUserResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/User'
    StatsResponse:
      type: object
      properties:
        data:
          type: object
          properties:
            total_users:
              type: integer
              description: Total number of registered users with 'user' role
            total_cvs:
              type: integer
              description: Total number of CVs created
            total_application_letters:
              type: integer
              description: Total number of application letters created
            total_applications:
              type: integer
              description: Total number of job applications
            total_cv_templates:
              type: integer
              description: Total number of available CV templates
            total_application_letter_templates:
              type: integer
              description: Total number of available application letter templates
    ApplicationStatsResponse:
      type: object
      properties:
        data:
          type: object
          properties:
            total_applications:
              type: integer
              description: Total number of job applications
            active_applications:
              type: integer
              description: Number of active applications
            interview:
              type: integer
              description: Number of applications in interview stage
            offer:
              type: integer
              description: Number of applications with offer
            rejected:
              type: integer
              description: Number of rejected applications
            needs_followup:
              type: integer
              description: Number of applications that need follow-up
            overdue:
              type: integer
              description: Number of overdue applications
            no_followup:
              type: integer
              description: Number of applications without follow-up
    DashboardResponse:
      type: object
      properties:
        data:
          type: object
          properties:
            total_applications:
              type: integer
              description: Total number of job applications
            active_applications:
              type: integer
              description: Number of active applications (not rejected or accepted)
            inactive_applications:
              type: integer
              description: Number of inactive applications (rejected or accepted)
            total_application_letters:
              type: integer
              description: Total number of application letters
            total_cvs:
              type: integer
              description: Total number of CVs
            total_portfolios:
              type: integer
              description: Total number of portfolios
    BlogStatus:
      type: string
      enum: [draft, published, archived]
    BlogCategory:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        slug:
          type: string
        description:
          type: string
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    BlogCategoryPayload:
      type: object
      properties:
        name:
          type: string
        slug:
          type: string
        description:
          type: string
          nullable: true
      required: [name, slug]
    BlogCategoryResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/BlogCategory'
    BlogCategoryListResponse:
      type: object
      properties:
        data:
          type: object
          properties:
            items:
              type: array
              items:
                $ref: '#/components/schemas/BlogCategory'
            pagination:
              $ref: '#/components/schemas/Pagination'
    BlogTag:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        slug:
          type: string
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    BlogTagPayload:
      type: object
      properties:
        name:
          type: string
        slug:
          type: string
      required: [name, slug]
    BlogTagResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/BlogTag'
    BlogTagListResponse:
      type: object
      properties:
        data:
          type: object
          properties:
            items:
              type: array
              items:
                $ref: '#/components/schemas/BlogTag'
            pagination:
              $ref: '#/components/schemas/Pagination'
    Blog:
      type: object
      properties:
        id:
          type: string
        user_id:
          type: string
        category_id:
          type: string
        title:
          type: string
        slug:
          type: string
        excerpt:
          type: string
          nullable: true
        content:
          type: string
        featured_image:
          type: string
          nullable: true
        status:
          $ref: '#/components/schemas/BlogStatus'
        read_time:
          type: integer
          nullable: true
        views:
          type: integer
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        published_at:
          type: string
          format: date-time
          nullable: true
        user:
          $ref: '#/components/schemas/User'
        category:
          $ref: '#/components/schemas/BlogCategory'
        tags:
          type: array
          items:
            $ref: '#/components/schemas/BlogTag'
    BlogPayload:
      type: object
      properties:
        title:
          type: string
        slug:
          type: string
        excerpt:
          type: string
          nullable: true
        content:
          type: string
        featured_image:
          type: string
          nullable: true
        status:
          $ref: '#/components/schemas/BlogStatus'
        read_time:
          type: integer
          nullable: true
        category_id:
          type: string
        tag_ids:
          type: array
          items:
            type: string
      required: [title, slug, content, status, category_id]
    BlogResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/Blog'
    BlogListResponse:
      type: object
      properties:
        data:
          type: object
          properties:
            items:
              type: array
              items:
                $ref: '#/components/schemas/Blog'
            pagination:
              $ref: '#/components/schemas/Pagination'
    AdminDashboardResponse:
      type: object
      properties:
        data:
          type: object
          properties:
            total_users:
              type: integer
              description: Total number of users
            total_admins:
              type: integer
              description: Total number of admin users
            total_blogs:
              type: integer
              description: Total number of blog posts
            total_published_blogs:
              type: integer
              description: Total number of published blog posts
            total_draft_blogs:
              type: integer
              description: Total number of draft blog posts
            total_categories:
              type: integer
              description: Total number of blog categories
            total_tags:
              type: integer
              description: Total number of blog tags
            total_templates:
              type: integer
              description: Total number of templates
            total_cv_templates:
              type: integer
              description: Total number of CV templates
            total_application_letter_templates:
              type: integer
              description: Total number of application letter templates
            recent_users:
              type: array
              items:
                $ref: '#/components/schemas/User'
              description: Recently registered users
            recent_blogs:
              type: array
              items:
                $ref: '#/components/schemas/Blog'
              description: Recently created blog posts
            blog_status_distribution:
              type: object
              properties:
                draft:
                  type: integer
                published:
                  type: integer
                archived:
                  type: integer
              description: Distribution of blog posts by status
            user_role_distribution:
              type: object
              properties:
                user:
                  type: integer
                admin:
                  type: integer
              description: Distribution of users by role
    AdminCreateUserRequest:
      type: object
      properties:
        name:
          type: string
        username:
          type: string
        email:
          type: string
          format: email
        password:
          type: string
        phone:
          type: string
          nullable: true
        role:
          type: string
          enum: [user, admin]
          default: user
        avatar:
          type: string
          nullable: true
      required: [name, username, email, password]
    AdminUpdateUserRequest:
      type: object
      properties:
        name:
          type: string
        username:
          type: string
        email:
          type: string
          format: email
        phone:
          type: string
          nullable: true
        role:
          type: string
          enum: [user, admin]
        avatar:
          type: string
          nullable: true
    AdminUserListResponse:
      type: object
      properties:
        data:
          type: object
          properties:
            items:
              type: array
              items:
                $ref: '#/components/schemas/User'
            pagination:
              $ref: '#/components/schemas/Pagination'
    Template:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        slug:
          type: string
        type:
          type: string
          enum: [cv, application_letter]
        language:
          type: string
          enum: [en, id]
          default: en
        path:
          type: string
        preview:
          type: string
          nullable: true
          description: Path to the preview image for the template
        is_premium:
          type: boolean
          default: false
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    TemplateResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/Template'
    AdminCreateTemplateRequest:
      type: object
      properties:
        name:
          type: string
        slug:
          type: string
        type:
          type: string
          enum: [cv, application_letter]
        language:
          type: string
          enum: [en, id]
          default: en
        path:
          type: string
          description: Path to the template file (from temp upload)
        preview:
          type: string
          nullable: true
          description: Path to the preview image (from temp upload)
        is_premium:
          type: boolean
          default: false
      required: [name, slug, type, path]
    AdminUpdateTemplateRequest:
      type: object
      properties:
        name:
          type: string
        slug:
          type: string
        type:
          type: string
          enum: [cv, application_letter]
        language:
          type: string
          enum: [en, id]
        path:
          type: string
          description: Path to the template file (from temp upload)
        preview:
          type: string
          nullable: true
          description: Path to the preview image (from temp upload)
        is_premium:
          type: boolean
    AdminTemplateListResponse:
      type: object
      properties:
        data:
          type: object
          properties:
            items:
              type: array
              items:
                $ref: '#/components/schemas/Template'
            pagination:
              $ref: '#/components/schemas/Pagination'
    AdminCreateBlogRequest:
      type: object
      properties:
        title:
          type: string
        slug:
          type: string
        excerpt:
          type: string
          nullable: true
        content:
          type: string
        featured_image:
          type: string
          nullable: true
          description: Path to the featured image (from temp upload)
        status:
          $ref: '#/components/schemas/BlogStatus'
        read_time:
          type: integer
          nullable: true
        category_id:
          type: string
        author_id:
          type: string
        tag_ids:
          type: array
          items:
            type: string
      required: [title, slug, content, status, category_id, author_id]
    AdminUpdateBlogRequest:
      type: object
      properties:
        title:
          type: string
        slug:
          type: string
        excerpt:
          type: string
          nullable: true
        content:
          type: string
        featured_image:
          type: string
          nullable: true
          description: Path to the featured image (from temp upload)
        status:
          $ref: '#/components/schemas/BlogStatus'
        read_time:
          type: integer
          nullable: true
        category_id:
          type: string
        author_id:
          type: string
        tag_ids:
          type: array
          items:
            type: string
    AdminBlogListResponse:
      type: object
      properties:
        data:
          type: object
          properties:
            items:
              type: array
              items:
                $ref: '#/components/schemas/Blog'
            pagination:
              $ref: '#/components/schemas/Pagination'
    AdminCreateBlogCategoryRequest:
      type: object
      properties:
        name:
          type: string
        slug:
          type: string
        description:
          type: string
          nullable: true
      required: [name, slug]
    AdminUpdateBlogCategoryRequest:
      type: object
      properties:
        name:
          type: string
        slug:
          type: string
        description:
          type: string
          nullable: true
    AdminBlogCategoryListResponse:
      type: object
      properties:
        data:
          type: object
          properties:
            items:
              type: array
              items:
                $ref: '#/components/schemas/BlogCategory'
            pagination:
              $ref: '#/components/schemas/Pagination'
    AdminCreateBlogTagRequest:
      type: object
      properties:
        name:
          type: string
        slug:
          type: string
      required: [name, slug]
    AdminUpdateBlogTagRequest:
      type: object
      properties:
        name:
          type: string
        slug:
          type: string
    AdminBlogTagListResponse:
      type: object
      properties:
        data:
          type: object
          properties:
            items:
              type: array
              items:
                $ref: '#/components/schemas/BlogTag'
            pagination:
              $ref: '#/components/schemas/Pagination'
    TemplateWithoutPath:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        slug:
          type: string
        type:
          type: string
          enum: [cv, application_letter]
        language:
          type: string
          enum: [en, id]
          default: en
        preview:
          type: string
          nullable: true
          description: Path to the preview image for the template
        is_premium:
          type: boolean
          default: false
        created_at:
          type: string
          format: date-time
          nullable: true
        updated_at:
          type: string
          format: date-time
          nullable: true

